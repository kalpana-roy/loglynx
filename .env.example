# LogLynx Configuration File
# Copy this file to .env and customize the values

# ================================
# Database Configuration
# ================================
DB_PATH=loglynx.db
DB_MAX_OPEN_CONNS=10
DB_MAX_IDLE_CONNS=3
DB_CONN_MAX_LIFE=1h

# Data Retention (NEW - Automatic cleanup)
# Set to 0 to disable automatic cleanup (database will grow indefinitely)
DB_RETENTION_DAYS=60

# Cleanup schedule - how often to check if cleanup should run
DB_CLEANUP_INTERVAL=1h

# Time of day to run cleanup (24-hour format HH:MM)
# Default: 02:00 (2 AM) - recommended for low-traffic time
DB_CLEANUP_TIME=02:00

# Run VACUUM after cleanup to reclaim disk space
# VACUUM briefly locks the database (~1 minute per GB freed)
DB_VACUUM_ENABLED=true

# ================================
# GeoIP Configuration
# ================================
# Download GeoIP databases from MaxMind:
# https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
GEOIP_ENABLED=true
GEOIP_CITY_DB=geoip/GeoLite2-City.mmdb
GEOIP_COUNTRY_DB=geoip/GeoLite2-Country.mmdb
GEOIP_ASN_DB=geoip/GeoLite2-ASN.mmdb

# ================================
# Log Sources Configuration
# ================================
# Path to Traefik access log file
TRAEFIK_LOG_PATH=traefik/logs/access.log

# Traefik log format (auto, json, clf)
# auto: automatically detects format (default)
# json: expects JSON formatted logs only
# clf: expects Common Log Format (text) only
TRAEFIK_LOG_FORMAT=auto

# Auto-discover log files in directories
LOG_AUTO_DISCOVER=true

# Initial Import Limiting (NEW)
# On first run, only import last N days from log files
# This prevents overwhelming the database with years of old logs
# Set to 0 to import all historical data
INITIAL_IMPORT_DAYS=60

# Enable/disable initial import limiting
INITIAL_IMPORT_ENABLE=true

# ================================
# Web Server Configuration
# ================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
SERVER_PRODUCTION=false

# Dashboard UI enabled (set to false for API-only mode)
# When disabled, only API routes at /api/v1 are accessible
# Useful for headless/API-only deployments or security-focused setups
DASHBOARD_ENABLED=true

# Application log level (trace, debug, info, warn, error, fatal)
# Default: info
LOG_LEVEL=info

# ================================
# Performance Tuning
# ================================
# How often to collect real-time metrics
METRICS_INTERVAL=5s

# GeoIP cache size (number of IPs to cache)
GEOIP_CACHE_SIZE=10000 #Loaded but not implemented yet (reserved for future LRU caching)

# Batch size for bulk inserts
BATCH_SIZE=1000

# Number of worker goroutines for log processing
WORKER_POOL_SIZE=4